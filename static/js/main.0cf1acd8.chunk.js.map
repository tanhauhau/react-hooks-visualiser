{"version":3,"sources":["components/Editor.module.scss","App.module.scss","components/Editor.js","components/EditorPanel.js","utils/ProxyObject.js","utils/ContextObject.js","components/Data.js","components/ObjectHover.js","components/Table.js","components/Hooks.js","components/Scope.js","components/Props.js","components/Context.js","components/History.js","components/Tab.js","utils/babel.js","utils/useBabel.js","utils/hook.js","utils/useCodeRunner.js","utils/useHistory.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","readOnly","app","leftPanel","rightPanel","Editor","_ref","code","onCodeChange","props","Object","objectWithoutProperties","react_default","a","createElement","lib_default","assign","mode","theme","width","height","onChange","name","value","showPrintMargin","editorProps","$blockScrolling","setOptions","useWorker","className","styles","Button","styled","button","_templateObject","Container","div","_templateObject2","HintText","span","_templateObject3","EditorPanel","disableRun","running","onRun","onReset","onNext","nextText","nextHint","onClick","disabled","Fragment","ProxyObject","data","classCallCheck","this","newData","ContextObject","Data","concat","rawData","getValue","undefined","JSON","stringify","DispatchContext","React","createContext","StateContext","map","WeakMap","index","reducer","state","action","type","objectSpread","defineProperty","get","initialState","ObjectHoverProvider","children","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","Provider","HoverDiv","ObjectHover_templateObject","highlight","color","ObjectHover","_ref2","useContext","isHoverable","fn","fnIndex","has","set","randomcolor","luminosity","seed","onMouseEnter","onMouseLeave","Table","Table_templateObject","TableHeader","Table_templateObject2","TableData","Table_templateObject3","HooksContainer","Hooks_templateObject","HookDiv","Hooks_templateObject2","HookTitleDiv","Hooks_templateObject3","HookBody","_templateObject4","HookArrow","_templateObject5","HookRightArrow","_templateObject6","Hooks","hook","hooks","hookPointer","Hooks_Hook","key","active","Hook","HookData","HOOK_DATA_MAP","useState","_ref4","setState","_ref5","useCallback","_ref6","callback","deps","dep","useMemo","_ref7","memoised","_ref8","context","_ref3","HookDataComponent","Header","Scope_templateObject","Scope","scopes","lastScope","length","_useState","_useState2","scopeIndex","setScopeIndex","scope","useEffect","e","target","_","keys","Props","onPropsChange","ContentEditable","contentEditable","suppressContentEditableWarning","onBlur","newValue","str","parse","tryParse","textContent","onKeyDown","keyCode","preventDefault","blur","Context","onContextChange","console","log","Context_ContentEditable","History","history","item","HistoryItem","Item","History_templateObject","status","Logs","logs","statementIndex","isComponentDirty","componentName","Array","isArray","Log","HookBadge","History_templateObject2","LOG_MAP","assignment","id","render","href","rel","updateProps","updateContext","hooks/useState","_ref9","isInitial","update/useState","_ref10","oldValue","hooks/useReducer","_ref11","init","initialArg","update/useReducer","_ref12","nextState","oldState","hooks/useCallback","_ref13","Deps","update/useCallback","_ref14","prevDeps","shouldUpdate","prevCallback","hooks/useMemo","_ref15","memo","update/useMemo","_ref16","prevMemoised","hooks/useContext","_ref18","update/useContext","_ref19","LogComponent","_ref17","gray","TabsOuterContainer","Tab_templateObject","TabsContainer","Tab_templateObject2","TabContainer","Tab_templateObject3","TabHeaderContainer","Tab_templateObject4","TabHeader","Tab_templateObject5","TabDivider","Tab_templateObject6","Tabs","defaultTab","tabs","child","activeTab","setActiveTab","tab","cloneElement","Tab","babelOptions","ast","presets","reactPreset","plugins","manipulateOptions","opts","parserOpts","push","useBabel","initialCode","setCode","_useState3","_useState4","error","setError","_useState5","_useState6","setAst","debouncedCode","delay","_useState7","_useState8","debounceValue","setDebounceValue","handler","setTimeout","clearTimeout","useDebounce","cancel","babel","then","catch","_this","_this$hooks$this$hook","hookType","hookIndex","setValue","_this2","arguments","_this$hooks$this$hook2","i","newCallback","newMemoised","toConsumableArray","codeRunnerReducer","_analyseCode","componentFunction","exportDefault","program","body","filter","node","declaration","tryFindComponentFunction","getComponentName","propNames","params","properties","property","getProps","statements","result","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Symbol","iterator","next","done","statement","declarations","forEach","err","return","flattenStatements","_evalRestOfCodeIntoSc","otherCodes","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","otherCode","executeStatement","evalRestOfCodeIntoScope","outerScope","analyseCode","keysToObjects","nextStatementIndex","nextStatement","statementAt","clone","loc","_executeStatement","slice","newHooks","method","alert","newContext","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","nextScope","nextHook","nextContext","evaluateExpression","elements","identifier","ReactDOM","argument","document","querySelector","dangerousEvalWithScope","element","callee","startsWith","args","apply","obj","object","prop","defaultValue","namedFunction","Function","join","reduce","historyReducer","App_templateObject","ScrollableContainer","App_templateObject2","VerticalContainer","App_templateObject3","App_templateObject4","App","_useBabel","_useBabel2","_useCodeRunner","setDispatch","useCodeRunner","_useCodeRunner2","codeState","dispatchCodeAction","_useHistory","dispatchHistory","currentState","clearHistory","useHistory","_useHistory2","currentCodeState","codeStateHistory","marker","_currentCodeState$sta","start","end","startRow","line","startCol","column","endRow","endCol","index_esm","split","defaultSize","App_Container","markers","App_Header","Boolean","window","location","hostname","match","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0cf1acd8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"readOnly\":\"Editor_readOnly__3Epc5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__mr9Ac\",\"leftPanel\":\"App_leftPanel__31p3r\",\"rightPanel\":\"App_rightPanel__1S-5a\"};","// @flow\nimport React from 'react';\nimport AceEditor from 'react-ace';\nimport 'brace/mode/javascript';\nimport 'brace/theme/github';\nimport styles from './Editor.module.scss';\n\ntype PropTypes = {\n  code: string,\n  onCodeChange: string => void,\n};\nexport default function Editor({\n  code,\n  onCodeChange,\n  readOnly,\n  ...props\n}: PropTypes) {\n  return (\n    <AceEditor\n      mode=\"javascript\"\n      theme=\"github\"\n      width=\"100%\"\n      height=\"100%\"\n      onChange={onCodeChange}\n      name=\"code\"\n      value={code}\n      showPrintMargin={false}\n      editorProps={{ $blockScrolling: true }}\n      setOptions={{ useWorker: false }}\n      readOnly={readOnly}\n      className={(readOnly ? styles.readOnly : '') + ' ace_editor ace-github'}\n      {...props}\n    />\n  );\n}\n","// @flow\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst Button = styled.button`\n  background: transparent;\n  border-radius: 3px;\n  border: 2px solid palevioletred;\n  color: palevioletred;\n  margin: 0 1em;\n  padding: 0.25em 1em;\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n\n  :hover {\n    background: palevioletred;\n    color: white;\n  }\n  \n  &[disabled] {\n    color: gray;\n    border-color: gray;\n    background: white;\n    cursor: not-allowed;\n  }\n`;\n\nconst Container = styled.div`\n  padding: 8px 16px;\n`;\nconst HintText = styled.span`\n  color: palevioletred;\n  font-size: 0.8em;\n  ::before {\n    content: '*'\n  }\n`;\n\nexport default function EditorPanel({\n  disableRun,\n  running,\n  onRun,\n  onReset,\n  onNext,\n  nextText,\n  nextHint\n}) {\n  return (\n    <Container>\n      {running ? (\n        <Button onClick={onReset}>{'Reset'}</Button>\n      ) : (\n        <Button onClick={onRun} disabled={disableRun}>{'Run'}</Button>\n      )}\n      {running && (\n        <>\n          <Button onClick={onNext}>{nextText}</Button>\n          {nextHint && <HintText>{nextHint}</HintText>}\n        </>\n      )}\n    </Container>\n  );\n}\n","// @flow\n\nexport default class ProxyObject {\n  constructor(data) {\n    this.data = data;\n  }\n  getValue() {\n    return this.data;\n  }\n  setValue(newData) {\n    if (newData !== this.data) {\n      return new ProxyObject(newData);\n    }\n    return this;\n  }\n}\n","export default class ContextObject {\n  constructor(name, value) {\n    this.name = name;\n    this.value = value;\n  }\n  setValue(value) {\n    return new ContextObject(this.name, value);\n  }\n}","import ProxyObject from '../utils/ProxyObject';\nimport ContextObject from '../utils/ContextObject';\n\nexport default function Data({ data }) {\n  if (typeof data === 'function') {\n    return `Function{${data.name || 'anonymous'}}`;\n  }\n\n  if (data instanceof ContextObject) {\n    return `Context{${data.name}}`;\n  }\n\n  let rawData = data;\n  if (data instanceof ProxyObject) {\n    rawData = data.getValue();\n  }\n\n  if (data === undefined) {\n    return 'undefined';\n  }\n\n  return JSON.stringify(rawData);\n}\n","import React, { useContext, useReducer } from 'react';\nimport styled from 'styled-components';\nimport randomcolor from 'randomcolor';\nimport ProxyObject from '../utils/ProxyObject';\nimport ContextObject from '../utils/ContextObject';\nimport Data from './Data';\n\nconst DispatchContext = React.createContext();\nconst StateContext = React.createContext();\n\nconst map = new WeakMap();\nlet index = 0;\n\nfunction ensureMap(fn) {\n  if (!map.has(fn)) {\n    map.set(fn, index++);\n  }\n  return map.get(fn);\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'hover':\n      return {\n        ...state,\n        [map.get(action.data)]: true,\n      };\n    case 'unhover':\n      return {\n        ...state,\n        [map.get(action.data)]: false,\n      };\n    default:\n      return state;\n  }\n};\nconst initialState = {};\n\nexport function ObjectHoverProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <DispatchContext.Provider value={dispatch}>\n      <StateContext.Provider value={state}>{children}</StateContext.Provider>\n    </DispatchContext.Provider>\n  );\n}\n\nconst HoverDiv = styled.div`\n  color: ${props => (props.highlight ? 'white' : props.color)};\n  background: ${props => (props.highlight ? props.color : 'transparent')};\n  display: inline-block;\n  cursor: pointer;\n`;\n\nexport function ObjectHover({ data }) {\n  const state = useContext(StateContext);\n  const dispatch = useContext(DispatchContext);\n\n  if (!isHoverable(data)) {\n    return <Data data={data} />;\n  }\n\n  const fnIndex = ensureMap(data);\n\n  return (\n    <HoverDiv\n      color={randomcolor({ luminosity: 'dark', seed: fnIndex * 10 })}\n      highlight={state[fnIndex]}\n      onMouseEnter={() => dispatch({ type: 'hover', data: data })}\n      onMouseLeave={() => dispatch({ type: 'unhover', data: data })}\n    >\n      <Data data={data} />\n    </HoverDiv>\n  );\n}\n\nfunction isHoverable(data) {\n  return (\n    typeof data === 'function' ||\n    data instanceof ProxyObject ||\n    data instanceof ContextObject\n  );\n}\n","import styled from 'styled-components';\n\nexport const Table = styled.div`\n  display: grid;\n  grid-template-columns: auto auto;\n  align-items: center;\n  justify-items: center;\n`;\n\nexport const TableHeader = styled.div`\n  grid-column: 1;\n  justify-self: end;\n  font-weight: 500;\n  margin-right: 4px;\n`;\n\nexport const TableData = styled.div`\n  grid-column: 2;\n  color: #555;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ObjectHover } from './ObjectHover';\nimport { Table, TableHeader, TableData } from './Table';\n\nconst HooksContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-bottom: 12px;\n`;\nconst HookDiv = styled.div`\n  border: 1px solid forestgreen;\n  border-radius: 4px;\n  display: inline-block;\n  position: relative;\n`;\nconst HookTitleDiv = styled.div`\n  background: forestgreen;\n  color: white;\n  padding: 4px;\n`;\nconst HookBody = styled.div`\n  padding: 4px;\n`;\nconst HookArrow = styled.div`\n  color: forestgreen;\n`;\nconst HookRightArrow = styled.div`\n  position: absolute;\n  right: 100%;\n  top: 50%;\n  transform: translateY(-50%);\n  margin-right: 5px;\n`;\n\nexport default function Hooks({ hook }) {\n  const { hooks, hookPointer } = hook;\n  return (\n    <HooksContainer>\n      {hooks.map((hook, index) => (\n        <Hook key={index} active={index === hookPointer} hook={hook} />\n      ))}\n    </HooksContainer>\n  );\n}\n\nfunction Hook({ hook, active, children }) {\n  return (\n    <>\n      <HookArrow> ⇣ </HookArrow>\n      <HookDiv>\n        {active && <HookRightArrow>⇢</HookRightArrow>}\n        <HookTitleDiv>{hook.type}</HookTitleDiv>\n        <HookBody>\n          <HookData hook={hook} />\n        </HookBody>\n      </HookDiv>\n    </>\n  );\n}\n\nconst HOOK_DATA_MAP = {\n  useState: HookUseState,\n  useReducer: HookUseReducer,\n  useCallback: HookUseCallback,\n  useMemo: HookUseMemo,\n  useContext: HookUseContext,\n};\n\nfunction HookData({ hook }) {\n  const HookDataComponent = HOOK_DATA_MAP[hook.type];\n  if (HookDataComponent) {\n    return <HookDataComponent hook={hook} />;\n  }\n  return null;\n}\n\nfunction HookUseState({ hook }) {\n  return (\n    <Table>\n      <TableHeader>state</TableHeader>\n      <TableData>\n        <ObjectHover data={hook.state} />\n      </TableData>\n      <TableHeader>setState</TableHeader>\n      <TableData>\n        <ObjectHover data={hook.setState} />\n      </TableData>\n    </Table>\n  );\n}\n\nfunction HookUseReducer({ hook }) {\n  return (\n    <Table>\n      <TableHeader>state</TableHeader>\n      <TableData>\n        <ObjectHover data={hook.state} />\n      </TableData>\n      <TableHeader>reducer</TableHeader>\n      <TableData>\n        <ObjectHover data={hook.reducer} />\n      </TableData>\n      <TableHeader>dispatch</TableHeader>\n      <TableData>\n        <ObjectHover data={hook.dispatch} />\n      </TableData>\n    </Table>\n  );\n}\n\nfunction HookUseCallback({ hook }) {\n  const { callback, deps } = hook;\n  return (\n    <Table>\n      <TableHeader>Callback</TableHeader>\n      <TableData>\n        <ObjectHover data={callback} />\n      </TableData>\n      <TableHeader>Deps</TableHeader>\n      <TableData>\n        {'['}\n        {deps.map((dep, index) => (\n          <>\n            {index > 0 ? ',' : null}\n            <ObjectHover data={dep} />\n          </>\n        ))}\n        {']'}\n      </TableData>\n    </Table>\n  );\n}\n\nfunction HookUseMemo({ hook }) {\n  const { memoised, deps } = hook;\n  return (\n    <Table>\n      <TableHeader>Memoised</TableHeader>\n      <TableData>\n        <ObjectHover data={memoised} />\n      </TableData>\n      <TableHeader>Deps</TableHeader>\n      <TableData>\n        {'['}\n        {deps.map((dep, index) => (\n          <>\n            {index > 0 ? ',' : null}\n            <ObjectHover data={dep} />\n          </>\n        ))}\n        {']'}\n      </TableData>\n    </Table>\n  );\n}\n\nfunction HookUseContext({ hook }) {\n  const { context } = hook;\n  return (\n    <Table>\n      <TableHeader>Context</TableHeader>\n      <TableData>\n        <ObjectHover data={context} />\n      </TableData>\n    </Table>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Table, TableHeader, TableData } from './Table';\nimport { ObjectHover } from './ObjectHover';\n\nconst Header = styled.div`\n  padding: 4px;\n  text-align: center;\n`;\n\nexport default function Scope({ scopes }) {\n  const lastScope = scopes.length - 1;\n  const [scopeIndex, setScopeIndex] = useState(lastScope);\n  const scope = scopes[scopeIndex];\n\n  useEffect(() => {\n    setScopeIndex(lastScope);\n  }, [lastScope]);\n\n  return (\n    <>\n      <Header>\n        <select\n          value={scopeIndex}\n          onChange={e => setScopeIndex(e.target.value)}\n        >\n          {scopes.map((_, index) => (\n            <option key={index} value={index}>\n              {index === lastScope ? 'Current Scope' : `Scope ${index}`}\n            </option>\n          ))}\n        </select>\n      </Header>\n      <Table>\n        {Object.keys(scope).map(key => (\n          <React.Fragment key={key}>\n            <TableHeader>{key}</TableHeader>\n            <TableData>\n              <ObjectHover data={scope[key]} />\n            </TableData>\n          </React.Fragment>\n        ))}\n      </Table>\n    </>\n  );\n}\n","import React from 'react';\nimport { Table, TableHeader, TableData } from './Table';\nimport { ObjectHover } from './ObjectHover';\n\nexport default function Props({ props, onPropsChange }) {\n  return (\n    <Table>\n      {Object.keys(props).map(key => (\n        <React.Fragment key={key}>\n          <TableHeader>{key}</TableHeader>\n          <TableData>\n            <ContentEditable\n              value={props[key]}\n              onChange={value => onPropsChange(key, value)}\n            />\n          </TableData>\n        </React.Fragment>\n      ))}\n    </Table>\n  );\n}\n\nfunction ContentEditable({ value, onChange }) {\n  const onInput = e => {\n    const newValue = tryParse(e.target.textContent);\n    if (newValue !== value) {\n      onChange(newValue);\n    }\n  };\n  return (\n    <div\n      contentEditable={true}\n      suppressContentEditableWarning={true}\n      onBlur={onInput}\n      onKeyDown={e => {\n        if (e.keyCode === 13) {\n          e.preventDefault();\n          e.target.blur();\n        }\n      }}\n    >\n      <ObjectHover data={value} />\n    </div>\n  );\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    return str;\n  }\n}\n","import React from 'react';\nimport { Table, TableHeader, TableData } from './Table';\nimport { ObjectHover } from './ObjectHover';\n\nexport default function Context({ context, onContextChange }) {\n  console.log(context);\n  return (\n    <Table>\n      {Object.keys(context).map(key => (\n        <React.Fragment key={key}>\n          <TableHeader>\n            <ObjectHover data={context[key]} />\n          </TableHeader>\n          <TableData>\n            <ContentEditable\n              value={context[key].value}\n              onChange={value => onContextChange(key, value)}\n            />\n          </TableData>\n        </React.Fragment>\n      ))}\n    </Table>\n  );\n}\n\nfunction ContentEditable({ value, onChange }) {\n  const onInput = e => {\n    const newValue = tryParse(e.target.textContent);\n    if (newValue !== value) {\n      onChange(newValue);\n    }\n  };\n  return (\n    <div\n      contentEditable={true}\n      suppressContentEditableWarning={true}\n      onBlur={onInput}\n      onKeyDown={e => {\n        if (e.keyCode === 13) {\n          e.preventDefault();\n          e.target.blur();\n        }\n      }}\n    >\n      <ObjectHover data={value} />\n    </div>\n  );\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    return str;\n  }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ObjectHover } from './ObjectHover';\n\nexport default function History({ history }) {\n  if (!history) {\n    return null;\n  }\n  return history.map((item, index) => <HistoryItem key={index} item={item} />);\n}\n\nconst Item = styled.div`\n  margin: 4px;\n  padding: 8px;\n  border-radius: 4px;\n  border: 1px solid gray;\n  transition: transform 200ms ease-in-out;\n  cursor: pointer;\n\n  :hover {\n    transform: translate(-1px, -1px);\n  }\n`;\n\nfunction HistoryItem({ item }) {\n  if (item.status !== 'running') {\n    // filter out 'ready' state\n    return null;\n  }\n  return (\n    <Item>\n      <Logs logs={item.logs} />\n      {item.statementIndex === -1\n        ? item.isComponentDirty\n          ? `${item.componentName} has been scheduled for a re-render`\n          : `${item.componentName} is ready to be rendered`\n        : null}\n    </Item>\n  );\n}\n\nfunction Logs({ logs }) {\n  if (!logs || !Array.isArray(logs)) {\n    return null;\n  }\n  return logs.map((log, index) => <Log key={index} log={log} />);\n}\n\nconst HookBadge = styled.div`\n  display: inline-block;\n  border-radius: 4px;\n  color: white;\n  background-color: slateblue;\n  padding: 1px 4px;\n  font-weight: 500;\n  font-size: 0.8em;\n  margin-right: 4px;\n`;\n\nconst LOG_MAP = {\n  assignment: LogAssignment,\n  render: LogRender,\n  updateProps: LogProps,\n  updateContext: LogContext,\n\n  'hooks/useState': LogHookUseState,\n  'update/useState': LogUpdateUseState,\n\n  'hooks/useReducer': LogHookUseReducer,\n  'update/useReducer': LogUpdateUseReducer,\n\n  'hooks/useCallback': LogHookUseCallback,\n  'update/useCallback': LogUpdateUseCallback,\n\n  'hooks/useMemo': LogHookUseMemo,\n  'update/useMemo': LogUpdateUseMemo,\n\n  'hooks/useContext': LogHookUseContext,\n  'update/useContext': LogUpdateUseContext,\n};\n\nfunction Log({ log }) {\n  const LogComponent = LOG_MAP[log.type];\n  if (LogComponent) {\n    return <LogComponent log={log} />;\n  }\n  return null;\n}\n\nfunction LogAssignment({ log }) {\n  return (\n    <div>\n      Assigning <ObjectHover data={log.value} /> to {log.id}\n    </div>\n  );\n}\n\nfunction LogRender({ log }) {\n  return (\n    <div>\n      Return a virtual DOM.{' '}\n      <a\n        href=\"https://reactjs.org/docs/reconciliation.html\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        Reconcile\n      </a>{' '}\n      and render to DOM.\n    </div>\n  );\n}\n\nfunction LogProps({ log }) {\n  return (\n    <div>\n      <HookBadge>props</HookBadge>\n      Updated props {log.key} to <ObjectHover data={log.value} />. Schedule a\n      re-render.\n    </div>\n  );\n}\n\nfunction LogContext({ log }) {\n  console.log(log);\n  return (\n    <div>\n      <HookBadge>context</HookBadge>\n      Updated context value <ObjectHover data={log.context} />. Schedule a\n      re-render.\n    </div>\n  );\n}\n\nfunction LogHookUseState({ log }) {\n  return (\n    <div>\n      <HookBadge>useState</HookBadge>\n      {log.isInitial ? (\n        <>\n          Creating new <em>useState</em> hook with initial state{' '}\n          <ObjectHover data={log.state} />\n        </>\n      ) : (\n        <>\n          Reusing <em>useState</em> hook, with state{' '}\n          <ObjectHover data={log.state} /> and setState{' '}\n          <ObjectHover data={log.setState} />{' '}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction LogUpdateUseState({ log }) {\n  return (\n    <div>\n      <HookBadge>useState</HookBadge>\n      Updated <ObjectHover data={log.oldValue} /> to{' '}\n      <ObjectHover data={log.newValue} />\n    </div>\n  );\n}\n\nfunction LogHookUseReducer({ log }) {\n  return (\n    <div>\n      <HookBadge>useReducer</HookBadge>\n      {log.isInitial ? (\n        <>\n          Creating new <em>useReducer</em> hook with initial state{' '}\n          <ObjectHover data={log.state} /> (\n          {log.init ? (\n            <>\n              Generated by calling <ObjectHover data={log.init} /> with{' '}\n              <ObjectHover data={log.initialArg} />\n            </>\n          ) : (\n            'Passed as 2nd argument in useReducer'\n          )}\n        </>\n      ) : (\n        <>\n          Reusing <em>useReducer</em> hook, with state{' '}\n          <ObjectHover data={log.state} /> and dispatch{' '}\n          <ObjectHover data={log.dispatch} />\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction LogUpdateUseReducer({ log }) {\n  return (\n    <div>\n      <HookBadge>useReducer</HookBadge>\n      Updated to new state <ObjectHover data={log.nextState} /> (return value\n      from calling reducer <ObjectHover data={log.reducer} /> with{' '}\n      <ObjectHover data={log.oldState} /> and <ObjectHover data={log.action} />)\n    </div>\n  );\n}\n\nfunction LogHookUseCallback({ log }) {\n  return (\n    <>\n      <div>\n        <HookBadge>useCallback</HookBadge>\n        Creating new <em>useCallback</em> hook, with deps{' '}\n        <Deps deps={log.deps} />\n      </div>\n      <div>\n        <HookBadge>useCallback</HookBadge>\n        Returning <ObjectHover data={log.callback} />\n      </div>\n    </>\n  );\n}\n\nfunction LogUpdateUseCallback({ log }) {\n  return (\n    <>\n      <div>\n        <HookBadge>useCallback</HookBadge>\n        Reusing <em>useCallback</em> hook\n      </div>\n      <div>\n        <HookBadge>useCallback</HookBadge>\n        Comparing <Deps deps={log.prevDeps} /> with <Deps deps={log.deps} />\n      </div>\n      {log.shouldUpdate && (\n        <div>\n          <HookBadge>useCallback</HookBadge>\n          Deps changed. Discarding <ObjectHover data={log.prevCallback} />\n        </div>\n      )}\n      <div>\n        <HookBadge>useCallback</HookBadge>\n        Returning <ObjectHover data={log.callback} />\n      </div>\n    </>\n  );\n}\n\nfunction LogHookUseMemo({ log }) {\n  return (\n    <>\n      <div>\n        <HookBadge>useMemo</HookBadge>\n        Creating new <em>useMemo</em> hook, with deps <Deps deps={log.deps} />\n      </div>\n      <div>\n        <HookBadge>useMemo</HookBadge>\n        Called <ObjectHover data={log.memo} />\n      </div>\n      <div>\n        <HookBadge>useMemo</HookBadge>\n        Returning <ObjectHover data={log.memoised} />\n      </div>\n    </>\n  );\n}\n\nfunction LogUpdateUseMemo({ log }) {\n  return (\n    <>\n      <div>\n        <HookBadge>useMemo</HookBadge>\n        Reusing <em>useMemo</em> hook\n      </div>\n      <div>\n        <HookBadge>useMemo</HookBadge>\n        Comparing <Deps deps={log.prevDeps} /> with <Deps deps={log.deps} />\n      </div>\n      {log.shouldUpdate && (\n        <>\n          <div>\n            <HookBadge>useMemo</HookBadge>\n            Deps changed. Discarding <ObjectHover data={log.prevMemoised} />\n          </div>\n          <div>\n            <HookBadge>useMemo</HookBadge>\n            Called <ObjectHover data={log.memo} />\n          </div>\n        </>\n      )}\n      <div>\n        <HookBadge>useMemo</HookBadge>\n        Returning <ObjectHover data={log.memoised} />\n      </div>\n    </>\n  );\n}\n\nfunction Deps({ deps }) {\n  return (\n    <>\n      {'['}\n      {deps.map((dep, index) => (\n        <React.Fragment key={index}>\n          {index > 0 && ','}\n          <ObjectHover data={dep} />\n        </React.Fragment>\n      ))}\n      {']'}\n    </>\n  );\n}\n\nfunction LogHookUseContext({ log }) {\n  return (\n    <>\n      <div>\n        <HookBadge>useContext</HookBadge>\n        Creating new <em>useContext</em> hook\n      </div>\n      <div>\n        <HookBadge>useContext</HookBadge>\n        Return context value <ObjectHover data={log.context.value} />\n      </div>\n    </>\n  );\n}\n\nfunction LogUpdateUseContext({ log }) {\n  return (\n    <>\n      <div>\n        <HookBadge>useContext</HookBadge>\n        Reusing <em>useContext</em> hook\n      </div>\n      <div>\n        <HookBadge>useContext</HookBadge>\n        Return context value <ObjectHover data={log.context.value} />\n      </div>\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nconst gray = 'rgba(0, 0, 0, 0.2)';\nconst TabsOuterContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\nconst TabsContainer = styled.div`\n  position: relative;\n  width: 100%;\n  flex: 1;\n`;\n\nconst TabContainer = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  overflow: auto;\n  opacity: ${props => (props.active ? 1 : 0)};\n  pointer-events: ${props => (props.active ? 'initial' : 'none')};\n  transition: opacity 0.2s ease-in-out;\n`;\nconst TabHeaderContainer = styled.div`\n  border-bottom: 1px solid ${gray};\n`;\nconst TabHeader = styled.div`\n  display: inline-block;\n  padding: 8px 16px;\n  cursor: pointer;\n  color: ${props => (props.active ? 'black' : 'gray')};\n`;\nconst TabDivider = styled.span`\n  margin: 4px 0;\n  border-left: 1px solid ${gray};\n`;\n\nexport function Tabs({ defaultTab, children }) {\n  const tabs = children.map(child => child.props.name);\n  const [activeTab, setActiveTab] = useState(defaultTab || tabs[0]);\n\n  return (\n    <TabsOuterContainer>\n      <TabHeaderContainer>\n        {tabs.map((tab, index) => (\n          <React.Fragment key={tab}>\n            {index > 0 && <TabDivider />}\n            <TabHeader\n              onClick={() => setActiveTab(tab)}\n              active={tab === activeTab}\n            >\n              {tab}\n            </TabHeader>\n          </React.Fragment>\n        ))}\n      </TabHeaderContainer>\n      <TabsContainer>\n        {children.map(child => {\n          if (child.props.name === activeTab) {\n            return React.cloneElement(child, { active: true });\n          }\n          return child;\n        })}\n      </TabsContainer>\n    </TabsOuterContainer>\n  );\n}\nexport function Tab({ name, children, active }) {\n  return <TabContainer active={active}>{children}</TabContainer>;\n}\n","// @flow\nimport * as babel from '@babel/core';\nimport reactPreset from '@babel/preset-react';\nimport generate from '@babel/generator';\n\nconst babelOptions = {\n  ast: true,\n  presets: [reactPreset],\n  plugins: [\n    () => ({\n      manipulateOptions(opts, parserOpts) {\n        // enable jsx\n        parserOpts.plugins.push('objectRestSpread');\n      },\n    }),\n  ],\n};\n\nexport function parse(code: string) {\n  return babel\n    .transformAsync(code, babelOptions)\n    .then(({ ast }) => ast)\n}\n\nexport { generate };\n","// @flow\n\nimport { useState, useEffect, useCallback } from 'react';\nimport * as babel from './babel';\n\nexport default function useBabel(\n  initialCode: string\n): [string, any, ?Error, (string) => void] {\n  const [code, setCode] = useState(initialCode);\n  const [error, setError] = useState(null);\n  const [ast, setAst] = useState();\n  const onCodeChange = useCallback((code: string) => setCode(code), [setCode]);\n  const debouncedCode = useDebounce(code, 500);\n\n  useEffect(() => {\n    let cancel = false;\n    babel\n      .parse(debouncedCode)\n      .then(ast => {\n        if (!cancel) {\n          setAst(ast);\n          setError(null);\n        }\n      })\n      .catch(error => {\n        if (!cancel) {\n          setError(error);\n        }\n      });\n    return () => {\n      cancel = true;\n    };\n  }, [debouncedCode, setAst, setError]);\n\n  return [code, ast, error, onCodeChange];\n}\n\nfunction useDebounce(value, delay) {\n  const [debounceValue, setDebounceValue] = useState(value);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebounceValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, setDebounceValue, delay]);\n  return debounceValue;\n}\n","// @flow\nimport ProxyObject from './ProxyObject';\n\nexport default class Hook {\n  constructor() {\n    this.hooks = [];\n    this.hookPointer = -1;\n  }\n\n  setDispatch(dispatch) {\n    this.dispatch = dispatch;\n  }\n\n  add_useState(initialState, logs) {\n    this.hookPointer++;\n    if (this.hooks[this.hookPointer] !== undefined) {\n      const { state, setState } = this.hooks[this.hookPointer];\n\n      logs.push({ type: 'hooks/useState', isInitial: false, state, setState });\n\n      return [state, setState];\n    }\n    const state = initialState;\n    const setState = value => {\n      this.dispatch({\n        type: 'updateHook',\n        hookType: 'useState',\n        hookIndex: this.hookPointer,\n        data: { value },\n      });\n    };\n    this.hooks.push({\n      type: 'useState',\n      state,\n      setState,\n    });\n\n    logs.push({ type: 'hooks/useState', isInitial: true, state, setState });\n\n    return [state, setState];\n  }\n\n  update_useState(hookIndex, { value: newValue }, logs) {\n    const hook = this.hooks[hookIndex];\n    let nextState;\n    let oldValue = hook.state;\n    if (typeof newValue === 'function') {\n      nextState = hook.state.setValue(newValue(oldValue.getValue()));\n    } else {\n      nextState = hook.state.setValue(newValue);\n    }\n\n    logs.push({ type: 'update/useState', oldValue, newValue: nextState });\n\n    this.hooks[hookIndex] = {\n      ...hook,\n      state: nextState,\n    };\n  }\n\n  add_useReducer(reducer) {\n    this.hookPointer++;\n\n    // optional arguments\n    const initialArg = arguments.length > 2 ? arguments[1] : undefined;\n    const init = arguments.length > 3 ? arguments[2] : undefined;\n    // logs is always the last argument, because other args can be optional\n    const logs = arguments[arguments.length - 1];\n\n    if (this.hooks[this.hookPointer] !== undefined) {\n      const { state, dispatch } = this.hooks[this.hookPointer];\n\n      logs.push({\n        type: 'hooks/useReducer',\n        isInitial: false,\n        state,\n        dispatch,\n      });\n\n      return [state, dispatch];\n    }\n\n    const state =\n      typeof init === 'function'\n        ? new ProxyObject(init(initialArg.getValue()))\n        : initialArg;\n\n    const dispatch = action => {\n      this.dispatch({\n        type: 'updateHook',\n        hookType: 'useReducer',\n        hookIndex: this.hookPointer,\n        data: { action },\n      });\n    };\n    this.hooks.push({\n      type: 'useReducer',\n      state,\n      dispatch,\n      reducer,\n    });\n\n    logs.push({\n      type: 'hooks/useReducer',\n      isInitial: true,\n      state,\n      dispatch,\n      initialArg,\n      init,\n    });\n\n    return [state, dispatch];\n  }\n\n  update_useReducer(hookIndex, { action }, logs) {\n    const hook = this.hooks[hookIndex];\n\n    const oldState = hook.state;\n    let nextState = hook.state.setValue(\n      hook.reducer(oldState.getValue(), action)\n    );\n\n    logs.push({\n      type: 'update/useReducer',\n      reducer: hook.reducer,\n      action,\n      oldState,\n      nextState,\n    });\n\n    this.hooks[hookIndex] = {\n      ...hook,\n      state: nextState,\n    };\n  }\n\n  add_useCallback(callback) {\n    this.hookPointer++;\n\n    // optional arguments\n    const deps = arguments.length > 2 ? arguments[1] : undefined;\n    // logs is always the last argument, because other args can be optional\n    const logs = arguments[arguments.length - 1];\n\n    if (this.hooks[this.hookPointer] !== undefined) {\n      const hook = this.hooks[this.hookPointer];\n      const { callback: prevCallback, deps: prevDeps } = hook;\n\n      let shouldUpdate = false;\n      for (let i = 0; i < deps.length; i++) {\n        if (prevDeps[i] !== deps[i]) {\n          shouldUpdate = true;\n          break;\n        }\n      }\n\n      const newCallback = shouldUpdate ? callback : prevCallback;\n\n      logs.push({\n        type: 'update/useCallback',\n        shouldUpdate,\n        callback: newCallback,\n        prevCallback,\n        deps,\n        prevDeps,\n      });\n\n      this.hooks[this.hookPointer] = {\n        ...hook,\n        callback: newCallback,\n        deps,\n      };\n\n      return newCallback;\n    }\n\n    this.hooks.push({\n      type: 'useCallback',\n      callback,\n      deps,\n    });\n\n    logs.push({ type: 'hooks/useCallback', callback, deps });\n\n    return callback;\n  }\n\n  add_useMemo(memo) {\n    this.hookPointer++;\n\n    // optional arguments\n    const deps = arguments.length > 2 ? arguments[1] : undefined;\n    // logs is always the last argument, because other args can be optional\n    const logs = arguments[arguments.length - 1];\n\n    if (this.hooks[this.hookPointer] !== undefined) {\n      const hook = this.hooks[this.hookPointer];\n      const { memoised: prevMemoised, deps: prevDeps } = hook;\n\n      let shouldUpdate = false;\n      for (let i = 0; i < deps.length; i++) {\n        if (prevDeps[i] !== deps[i]) {\n          shouldUpdate = true;\n          break;\n        }\n      }\n\n      const newMemoised = shouldUpdate ? new ProxyObject(memo()) : prevMemoised;\n\n      logs.push({\n        type: 'update/useMemo',\n        shouldUpdate,\n        memoised: newMemoised,\n        prevMemoised,\n        deps,\n        prevDeps,\n        memo,\n      });\n\n      this.hooks[this.hookPointer] = {\n        ...hook,\n        memoised: newMemoised,\n        deps,\n      };\n\n      return newMemoised;\n    }\n\n    const memoised = new ProxyObject(memo());\n\n    this.hooks.push({\n      type: 'useMemo',\n      memoised,\n      deps,\n    });\n\n    logs.push({ type: 'hooks/useMemo', memoised, memo, deps });\n\n    return memoised;\n  }\n\n  add_useContext(context, logs) {\n    console.log('add_useContext', context);\n    this.hookPointer++;\n    if (this.hooks[this.hookPointer] !== undefined) {\n      logs.push({ type: 'update/useContext', context });\n\n      this.hooks[this.hookPointer] = {\n        ...this.hooks[this.hookPointer],\n        context,\n      }\n      return this.hooks[this.hookPointer].context.value;\n    }\n\n    this.hooks.push({\n      type: 'useContext',\n      context,\n    });\n\n    logs.push({ type: 'hooks/useContext', context });\n\n    return context.value;\n  }\n\n  clone() {\n    const hook = new Hook();\n    hook.hooks = [...this.hooks];\n    hook.hookPointer = this.hookPointer;\n    hook.dispatch = this.dispatch;\n    return hook;\n  }\n}\n","// @flow\n/* eslint-disable no-new-func, no-loop-func */\nimport React, { useReducer } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as babel from './babel';\nimport Hook from './hook';\nimport ProxyObject from './ProxyObject';\nimport ContextObject from './ContextObject';\nimport { AST } from 'handlebars';\n\ntype Location = {\n  line: number,\n  column: number,\n};\nexport type State = {|\n  status: 'ready' | 'running' | 'pause',\n  componentName: string,\n  hooks: Hook,\n  scope: {},\n  props: {},\n  context: {},\n  statementAt: ?{ start: Location, end: Location },\n  statementIndex: number,\n  statements: ReadOnlyArray<Object>,\n  isComponentDirty: boolean,\n|};\n\nfunction codeRunnerReducer(state: State, action): State {\n  switch (action.type) {\n    case 'start': {\n      const {\n        componentName,\n        propNames,\n        statements,\n        outerScope,\n        context,\n      } = analyseCode(action.ast);\n      const scope = { ...outerScope };\n      return {\n        ...state,\n        status: 'running',\n        componentName,\n        props: keysToObjects(propNames),\n        outerScope,\n        scopes: [scope],\n        scope,\n        context,\n        statements,\n        statementIndex: -1,\n      };\n    }\n    case 'next': {\n      const nextStatementIndex =\n        state.statementIndex === -1\n          ? 0\n          : state.statements[state.statementIndex].next;\n      const nextStatement = state.statements[nextStatementIndex];\n\n      let statementAt = null;\n      let { scopes, outerScope, scope, hooks, context } = state;\n      let logs = [];\n\n      if (nextStatementIndex > -1) {\n        // clone\n        scope = { ...scope };\n        hooks = hooks.clone();\n        context = { ...context };\n\n        if (nextStatementIndex === 0) {\n          Object.assign(scope, state.props);\n        }\n\n        statementAt = nextStatement.statement.loc;\n        ({ scope, hooks, logs, context } = executeStatement(\n          nextStatement.statement,\n          scope,\n          hooks,\n          context\n        ));\n\n        scopes = scopes.slice(0, -1).concat(scope);\n      } else {\n        scope = { ...outerScope };\n        scopes = [...scopes, scope];\n\n        hooks = hooks.clone();\n        hooks.hookPointer = -1;\n      }\n\n      return {\n        ...state,\n        statementIndex: nextStatementIndex,\n        statementAt,\n        scopes,\n        scope,\n        hooks,\n        context,\n\n        // componentDirty\n        isComponentDirty:\n          nextStatementIndex === 0 ? false : state.isComponentDirty,\n\n        // logs\n        logs,\n      };\n    }\n    case 'updateHook': {\n      const logs = [];\n      const newHooks = state.hooks.clone();\n      const method = `update_${action.hookType}`;\n\n      if (typeof newHooks[method] === 'function') {\n        newHooks[method](action.hookIndex, action.data, logs);\n      } else {\n        alert(`${action.hookType} not implemented`);\n      }\n\n      return {\n        ...state,\n        isComponentDirty: true,\n        hooks: newHooks,\n        logs,\n      };\n    }\n    case 'updateProps':\n      return {\n        ...state,\n        props: {\n          ...state.props,\n          [action.key]: new ProxyObject(action.value),\n        },\n        isComponentDirty: true,\n        logs: [action],\n      };\n    case 'updateContext':\n      const newContext = state.context[action.key].setValue(action.value);\n      return {\n        ...state,\n        outerScope: {\n          ...state.outerScope,\n          [action.key]: newContext,\n        },\n        context: {\n          ...state.context,\n          [action.key]: newContext,\n        },\n        isComponentDirty: true,\n        logs: [{ ...action, context: newContext }],\n      };\n    case 'reset':\n      return initialState;\n    default:\n      return state;\n  }\n}\n\nconst initialState: State = {\n  status: 'ready',\n  componentName: '',\n  hooks: new Hook(),\n  scope: {},\n  props: {},\n  context: {},\n  statementAt: null,\n  isComponentDirty: false,\n};\n\nexport default function useCodeRunner(): [State, (Action) => void] {\n  const [state, dispatch] = useReducer(codeRunnerReducer, initialState);\n  state.hooks.setDispatch(dispatch);\n  return [state, dispatch];\n}\n\nfunction analyseCode(ast) {\n  const componentFunction = tryFindComponentFunction(ast);\n  if (componentFunction) {\n    const componentName = getComponentName(componentFunction);\n    const propNames = getProps(componentFunction);\n    const statements = flattenStatements(componentFunction.body.body);\n    const { scope: outerScope, context } = evalRestOfCodeIntoScope(ast);\n\n    return {\n      componentName,\n      propNames,\n      statements,\n      outerScope,\n      context,\n    };\n  }\n  return null;\n}\n\nfunction tryFindComponentFunction(ast) {\n  const exportDefault = ast.program.body.filter(\n    node => node.type === 'ExportDefaultDeclaration'\n  )[0];\n  if (exportDefault) {\n    return exportDefault.declaration;\n  }\n  return null;\n}\nfunction getComponentName(ast) {\n  return ast.id.name;\n}\nfunction getProps(ast) {\n  const props = ast.params[0];\n  if (props) {\n    if (props.type === 'ObjectPattern') {\n      return props.properties.map(property => {\n        return property.key.name;\n      });\n    } else {\n      // TODO: find\n      console.error('please use destructuring');\n    }\n  }\n  return [];\n}\n\nfunction evalRestOfCodeIntoScope(ast) {\n  const otherCodes = ast.program.body.filter(\n    node => node.type !== 'ExportDefaultDeclaration'\n  );\n  const scope = {};\n  const context = {};\n  for (const otherCode of otherCodes) {\n    executeStatement(otherCode, scope, null, context);\n  }\n  return { scope, context };\n}\n\n// TODO: infer props via referenced object type\n// function findReferencedStatements(identifierName, statements) {\n//   const redeclared =\n//     statements\n//       .filter(statement => statement.type === 'VariableDeclaration')\n//       .reduce((result, statement) => result.concat(statement.declarations), [])\n//       .filter(declaration => declaration.id.name === identifierName).length > 0;\n//   if (redeclared) {\n//     return [];\n//   }\n//   // TODO: tree traversal to find `MemberExpression` identifierName.xxx\n//   return statements.map(statement => {\n//     switch (statement.type) {\n//       case 'VariableDeclaration':\n//         return statement.declarations.filter(\n//           declaration =>\n//             declaration.init.type === 'Identifier' &&\n//             declaration.init.name === identifierName\n//         );\n//       case ''\n//     }\n//   });\n// }\nfunction flattenStatements(statements) {\n  const result = [];\n  let i = 0;\n  for (const statement of statements) {\n    switch (statement.type) {\n      case 'VariableDeclaration':\n        statement.declarations.forEach(declaration =>\n          result.push({\n            statement: declaration,\n            next: ++i,\n          })\n        );\n        break;\n      case 'ReturnStatement':\n        result.push({\n          statement,\n          next: -1, // end\n        });\n        break;\n      // TODO: handle if else\n      default:\n    }\n  }\n  return result;\n}\n\nfunction keysToObjects(keys) {\n  const result = {};\n  for (const key of keys) {\n    result[key] = new ProxyObject(null);\n  }\n  return result;\n}\n\nfunction executeStatement(statement, nextScope, nextHook: Hook, nextContext) {\n  console.log('statement', statement);\n  const logs = [];\n  switch (statement.type) {\n    case 'VariableDeclaration': {\n      statement.declarations.forEach(declaration =>\n        executeStatement(declaration, nextScope, nextHook, nextContext)\n      );\n      break;\n    }\n    case 'VariableDeclarator': {\n      const value = evaluateExpression(\n        statement.init,\n        {\n          scope: nextScope,\n          hook: nextHook,\n          context: nextContext,\n          name: statement.id.name,\n        },\n        logs\n      );\n      if (statement.id.type === 'Identifier') {\n        nextScope[statement.id.name] = value;\n\n        logs.push({ type: 'assignment', id: statement.id.name, value });\n      } else if (statement.id.type === 'ArrayPattern') {\n        statement.id.elements.forEach((identifier, index) => {\n          nextScope[identifier.name] = value[index];\n\n          logs.push({\n            type: 'assignment',\n            id: identifier.name,\n            value: value[index],\n          });\n        });\n      }\n      break;\n    }\n    case 'ReturnStatement':\n      ReactDOM.render(\n        evaluateExpression(\n          statement.argument,\n          { scope: nextScope, hook: nextHook, context: nextContext },\n          logs\n        ).getValue(),\n        document.querySelector('#render-here')\n      );\n      logs.push({ type: 'render' });\n      break;\n    case 'FunctionDeclaration':\n      nextScope[statement.id.name] = evaluateExpression(\n        statement,\n        {\n          scope: nextScope,\n          hook: nextHook,\n          context: nextContext,\n          name: statement.id.name,\n        },\n        logs\n      );\n      break;\n    default:\n      console.log(statement.type);\n  }\n  return { scope: nextScope, hooks: nextHook, context: nextContext, logs };\n}\n\nfunction evaluateExpression(ast, { scope, hook, context, name }, logs) {\n  switch (ast.type) {\n    case 'NumericLiteral':\n    case 'StringLiteral':\n    case 'BooleanLiteral':\n    case 'ObjectExpression':\n      return new ProxyObject(\n        dangerousEvalWithScope(babel.generate(ast).code, scope)\n      );\n    case 'ArrayExpression':\n      return ast.elements.map(element =>\n        evaluateExpression(element, { scope, hook, context, name }, logs)\n      );\n    case 'CallExpression':\n      if (ast.callee.type === 'Identifier') {\n        const callee = ast.callee.name;\n\n        if (callee.startsWith('use')) {\n          const method = `add_${callee}`;\n          if (typeof hook[method] === 'function') {\n            const args = ast.arguments.map(argument =>\n              evaluateExpression(argument, { scope, hook, context, name }, logs)\n            );\n            return hook[method](...args, logs);\n          } else {\n            alert(`${callee} not implemented`);\n            return [];\n          }\n        }\n      } else if (ast.callee.type === 'MemberExpression') {\n        const obj = ast.callee.object.name;\n        const prop = ast.callee.property.name;\n        if (obj === 'React' && prop === 'createContext') {\n          let defaultValue = undefined;\n          if (ast.arguments.length > 0) {\n            defaultValue = evaluateExpression(\n              ast.arguments[0],\n              { scope, hook, context, name },\n              logs\n            );\n          }\n          context[name] = new ContextObject(name, defaultValue);\n          return context[name];\n        }\n      }\n      return new ProxyObject(\n        dangerousEvalWithScope(babel.generate(ast).code, scope)\n      );\n    case 'Identifier':\n      return scope[ast.name];\n    case 'FunctionDeclaration':\n    case 'BinaryExpression':\n      return dangerousEvalWithScope(babel.generate(ast).code, scope);\n    case 'ArrowFunctionExpression':\n    case 'FunctionExpression': {\n      const fn = dangerousEvalWithScope(babel.generate(ast).code, scope);\n      if (!fn.name) {\n        return namedFunction(fn, name);\n      }\n      return fn;\n    }\n    default:\n  }\n}\n\nfunction dangerousEvalWithScope(code, scope) {\n  return Function(\n    'React',\n    `{${Object.keys(scope).join(',')}}`,\n    `return ${code}`\n  )(React, deproxy(scope));\n}\n\nfunction deproxy(obj) {\n  return Object.keys(obj).reduce((result, key) => {\n    if (obj[key] instanceof ProxyObject) {\n      result[key] = obj[key].getValue();\n    } else {\n      result[key] = obj[key];\n    }\n    return result;\n  }, {});\n}\n\nfunction namedFunction(fn, name) {\n  const fnObj = {\n    [name](...args) {\n      return fn(...args);\n    },\n  };\n  return fnObj[name];\n}\n","// @flow\nimport { useReducer, useEffect, useCallback } from 'react';\n\ntype State<T> = {\n  history: $ReadOnlyArray<T>,\n  index: number\n};\ntype Action<T> =\n  | {|\n      type: 'push',\n      data: T\n    |}\n  | {| type: 'goto', index: number |}\n  | {| type: 'clear' |};\n\nconst initialState = {\n  history: [],\n  index: -1\n};\n\nconst historyReducer = <T>(\n  state: State<T>,\n  action: Action<T>\n): State<T> => {\n  switch (action.type) {\n    case 'push':\n      return {\n        history: [...state.history, action.data],\n        index: state.index + 1\n      };\n    case 'goto':\n      return {\n        ...state,\n        index: action.index\n      };\n    case 'clear':\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport default function useHistory<T>(state: T): T {\n  const [history, dispatchHistory] = useReducer(historyReducer, initialState);\n\n  useEffect(() => {\n    dispatchHistory({ type: 'push', data: state });\n  }, [state, dispatchHistory]);\n\n  const currentState =\n    history.index < 0 ? null : history.history[history.index];\n\n  // const gotoHistory = useCallback(\n  //   index => dispatchHistory({ type: 'goto', index }),\n  //   [dispatchHistory]\n  // );\n  const clearHistory = useCallback(() => dispatchHistory({ type: 'clear' }), [\n    dispatchHistory\n  ]);\n\n  return [currentState, history.history, clearHistory]; // </T></T>, gotoHistory, clearHistory];\n}\n","// @flow\n\nimport React, { useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport SplitPane from 'react-split-pane';\nimport styles from './App.module.scss';\nimport Editor from './components/Editor';\nimport EditorPanel from './components/EditorPanel';\nimport { ObjectHoverProvider } from './components/ObjectHover';\nimport Hooks from './components/Hooks';\nimport Scope from './components/Scope';\nimport Props from './components/Props';\nimport Context from './components/Context';\nimport History from './components/History';\nimport { Tabs, Tab } from './components/Tab';\n\nimport useBabel from './utils/useBabel';\nimport useCodeRunner from './utils/useCodeRunner';\nimport useHistory from './utils/useHistory';\n\nconst initialCode = `\nfunction reducer(state, action) {\n  if (action === 'increment') {\n    return state + 1;\n  } else if (action === 'decrement') {\n    return state - 1;\n  }\n  return state;\n}\nconst cContext = React.createContext(10);\nexport default function MyCounter({ foo }) {\n  const c = useContext(cContext);\n  const [a, dispatch] = useReducer(reducer, 0);\n  const [b, setB] = useState(0);\n  const result = a * b + c;\n  const increment = useCallback(() => setB(b+1), [setB, b]);\n  const result2 = useMemo(() => a * b, [a, b]);\n  \n  return (\n    <div>\n      <div>{'A: '}\n      <button onClick={() => dispatch('increment')}>increment</button>\n      <button onClick={() => dispatch('decrement')}>decrement</button>\n      </div>\n      <div>{'B: '}\n      <button onClick={() => setB(b+1)}>increment</button>\n      <button onClick={() => setB(b-1)}>decrement</button>\n\n      <button onClick={increment}>memoised increment callback</button>\n      </div>\n      <div>{a} * {b} = {result}</div>\n      <div>Memoised result = {result2}</div>\n    </div>\n  )\n}`;\n\nconst Container = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: white;\n  flex: 1;\n`;\nconst ScrollableContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: white;\n  overflow: scroll;\n`;\nconst VerticalContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n`;\nconst Header = styled.div`\n  text-align: center;\n  padding: 8px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  position: sticky;\n  top: 0;\n  background: white;\n  z-index: 1;\n`;\n\nfunction App() {\n  const [code, ast, error, onCodeChange] = useBabel(initialCode);\n  const [codeState, dispatchCodeAction] = useCodeRunner();\n  const [currentCodeState, codeStateHistory, clearHistory] = useHistory(\n    codeState\n  );\n\n  const marker = useMemo(() => {\n    if (currentCodeState && currentCodeState.statementAt) {\n      const { start, end } = currentCodeState.statementAt;\n      return [\n        {\n          startRow: start.line - 1,\n          startCol: start.column,\n          endRow: end.line - 1,\n          endCol: end.column,\n          className: 'highlight-marker',\n          type: 'background',\n        },\n      ];\n    }\n    return [];\n  }, [currentCodeState]);\n\n  console.log(ast);\n\n  return (\n    <SplitPane split=\"vertical\" defaultSize=\"45%\">\n      <Container>\n        <EditorPanel\n          running={\n            currentCodeState ? currentCodeState.status === 'running' : false\n          }\n          nextText={\n            currentCodeState && currentCodeState.statementIndex === -1\n              ? 'Render'\n              : 'Next'\n          }\n          nextHint={\n            currentCodeState && currentCodeState.isComponentDirty === true\n              ? 'Scheduled a re-render'\n              : null\n          }\n          disableRun={!!error}\n          onRun={() => dispatchCodeAction({ type: 'start', ast })}\n          onNext={() => dispatchCodeAction({ type: 'next' })}\n          onReset={() => {\n            dispatchCodeAction({ type: 'reset' });\n            clearHistory();\n          }}\n        />\n        <Editor\n          code={code}\n          onCodeChange={onCodeChange}\n          markers={marker}\n          readOnly={currentCodeState && currentCodeState.status === 'running'}\n        />\n      </Container>\n      <VerticalContainer>\n        {currentCodeState && currentCodeState.status === 'running' ? (\n          <ObjectHoverProvider>\n            <Header>\n              <div>Component Name: {currentCodeState.componentName}</div>\n            </Header>\n            <Container>\n              <SplitPane split=\"horizontal\" defaultSize=\"60%\">\n                <SplitPane split=\"vertical\" defaultSize=\"50%\">\n                  <Tabs>\n                    <Tab name=\"Scope\">\n                      <Scope scopes={currentCodeState.scopes} />\n                    </Tab>\n                    <Tab name=\"Props\">\n                      <Props\n                        props={currentCodeState.props}\n                        onPropsChange={(key, value) => {\n                          dispatchCodeAction({\n                            type: 'updateProps',\n                            key,\n                            value,\n                          });\n                        }}\n                      />\n                    </Tab>\n                    <Tab name=\"Context\">\n                      <Context\n                        context={currentCodeState.context}\n                        onContextChange={(key, value) => {\n                          dispatchCodeAction({\n                            type: 'updateContext',\n                            key,\n                            value,\n                          });\n                        }}\n                      />\n                    </Tab>\n                  </Tabs>\n                  <ScrollableContainer>\n                    <Header>Hooks</Header>\n                    <Hooks hook={currentCodeState.hooks} />\n                  </ScrollableContainer>\n                </SplitPane>\n                <Tabs>\n                  <Tab name=\"Logs\">\n                    <History history={codeStateHistory} />\n                  </Tab>\n                  <Tab name=\"Output\">\n                    <div id=\"render-here\" />\n                  </Tab>\n                </Tabs>\n              </SplitPane>\n            </Container>\n          </ObjectHoverProvider>\n        ) : null}\n      </VerticalContainer>\n    </SplitPane>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}